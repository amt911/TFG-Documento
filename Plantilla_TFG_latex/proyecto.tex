%PREGUNTAS
%No se si poner ejemplos de software real
%No se si con esto pueden preguntarme por las soluciones software mas avanzadas como F1 MANAGER
%No se si es demasiado poco lo que he escrito
%No se si he puesto demasiados requisitos.
%Tengo la sensacion de que hablo mucho y no digo nada.
%no se si estoy poniendo mi software como el mejor del mundo
% Quizas no he puesto las sificientes fuentes en la itnroudccion
% Arreglar nombre que sale arriba de la linea, que pone indice general, cuando no lo es
\documentclass[a4paper,11pt]{book}
%\documentclass[a4paper,twoside,11pt,titlepage]{book}
\usepackage{listings}
\usepackage[utf8]{inputenc}
\usepackage[spanish]{babel}

% \usepackage[style=list, number=none]{glossary} %
%\usepackage{titlesec}
%\usepackage{pailatino}

\decimalpoint
\usepackage{dcolumn}
\newcolumntype{.}{D{.}{\esperiod}{-1}}
\makeatletter
\addto\shorthandsspanish{\let\esperiod\es@period@code}
\makeatother


%\usepackage[chapter]{algorithm}
\RequirePackage{verbatim}
%\RequirePackage[Glenn]{fncychap}
\usepackage{fancyhdr}
\usepackage{graphicx}
\usepackage{afterpage}

\usepackage{longtable}

\usepackage[pdfborder={000}]{hyperref} %referencia

% ********************************************************************
% Re-usable information
% ********************************************************************
\newcommand{\myTitle}{Título del proyecto\xspace}
\newcommand{\myDegree}{Grado en Ingeniería Informática\xspace}
\newcommand{\myName}{Andrés Merlo Trujillo\xspace}
\newcommand{\myProf}{Luis López Escudero\xspace}
%\newcommand{\myOtherProf}{Nombre Apllido1 Apellido2 (tutor2)\xspace}
%\newcommand{\mySupervisor}{Put name here\xspace}  NO USADO
\newcommand{\myFaculty}{Escuela Técnica Superior de Ingenierías Informática y de
Telecomunicación\xspace}
\newcommand{\myFacultyShort}{E.T.S. de Ingenierías Informática y de
Telecomunicación\xspace}
\newcommand{\myDepartment}{Departamento de Lenguaje y Sistemas Informáticos\xspace}
\newcommand{\myUni}{\protect{Universidad de Granada}\xspace}
\newcommand{\myLocation}{Granada\xspace}
\newcommand{\myTime}{\today\xspace}
\newcommand{\myVersion}{Version 0.1\xspace}


\hypersetup{
pdfauthor = {\myName (andresmerlo@correo.ugr.es)},
pdftitle = {\myTitle},
pdfsubject = {},
pdfkeywords = {unreal, simulador, ia, },
pdfcreator = {LaTeX con el paquete ....},
pdfproducer = {pdflatex}
}

%\hyphenation{}


%\usepackage{doxygen/doxygen}
%\usepackage{pdfpages}
\usepackage{url}
\usepackage{colortbl,longtable}
\usepackage[stable]{footmisc}
%\usepackage{index}

%\makeindex
%\usepackage[style=long, cols=2,border=plain,toc=true,number=none]{glossary}
% \makeglossary

% Definición de comandos que me son tiles:
%\renewcommand{\indexname}{Índice alfabético}
%\renewcommand{\glossaryname}{Glosario}

\pagestyle{fancy}
\fancyhf{}
\fancyhead[LO]{\leftmark}
\fancyhead[RE]{\rightmark}
\fancyhead[RO,LE]{\textbf{\thepage}}
\renewcommand{\chaptermark}[1]{\markboth{\textbf{#1}}{}}
\renewcommand{\sectionmark}[1]{\markright{\textbf{\thesection. #1}}}

\setlength{\headheight}{1.5\headheight}

\newcommand{\HRule}{\rule{\linewidth}{0.5mm}}
%Definimos los tipos teorema, ejemplo y definición podremos usar estos tipos
%simplemente poniendo \begin{teorema} \end{teorema} ...
\newtheorem{teorema}{Teorema}[chapter]
\newtheorem{ejemplo}{Ejemplo}[chapter]
\newtheorem{definicion}{Definición}[chapter]

\definecolor{gray97}{gray}{.97}
\definecolor{gray75}{gray}{.75}
\definecolor{gray45}{gray}{.45}
\definecolor{gray30}{gray}{.94}

\lstset{ frame=Ltb,
     framerule=0.5pt,
     aboveskip=0.5cm,
     framextopmargin=3pt,
     framexbottommargin=3pt,
     framexleftmargin=0.1cm,
     framesep=0pt,
     rulesep=.4pt,
     backgroundcolor=\color{gray97},
     rulesepcolor=\color{black},
     %
     stringstyle=\ttfamily,
     showstringspaces = false,
     basicstyle=\scriptsize\ttfamily,
     commentstyle=\color{gray45},
     keywordstyle=\bfseries,
     %
     numbers=left,
     numbersep=6pt,
     numberstyle=\tiny,
     numberfirstline = false,
     breaklines=true,
   }
 
% minimizar fragmentado de listados
\lstnewenvironment{listing}[1][]
   {\lstset{#1}\pagebreak[0]}{\pagebreak[0]}

\lstdefinestyle{CodigoC}
   {
	basicstyle=\scriptsize,
	frame=single,
	language=C,
	numbers=left
   }
\lstdefinestyle{CodigoC++}
   {
	basicstyle=\small,
	frame=single,
	backgroundcolor=\color{gray30},
	language=C++,
	numbers=left
   }

 
\lstdefinestyle{Consola}
   {basicstyle=\scriptsize\bf\ttfamily,
    backgroundcolor=\color{gray30},
    frame=single,
    numbers=none
   }


\newcommand{\bigrule}{\titlerule[0.5mm]}


%Para conseguir que en las páginas en blanco no ponga cabecerass
\makeatletter
\def\clearpage{%
  \ifvmode
    \ifnum \@dbltopnum =\m@ne
      \ifdim \pagetotal <\topskip
        \hbox{}
      \fi
    \fi
  \fi
  \newpage
  \thispagestyle{empty}
  \write\m@ne{}
  \vbox{}
  \penalty -\@Mi
}
\makeatother

\usepackage{pdfpages}
\begin{document}
\input{portada/portada}
\input{prefacios/prefacio}

%\frontmatter
\tableofcontents
\newpage
%\listoffigures
%\listoftables
%
%\mainmatter
% \setlength{\parskip}{5pt}

\section{Introducción y Motivación}

El mundo del motor siempre ha sido un deporte que despierta la curiosidad en muchas personas alrededor del mundo, ya sea por la innovación tecnológica continua que se produce cada año en los vehículos, por sentir la adrenalina de conducir un coche de carreras o incluso por la satisfacción personal de ser capaz de dar órdenes a un piloto para llevarlo a la victoria, seleccionando las mejores estrategias en cada momento. Este proyecto se centrará en esto último.

\bigskip

Gracias al avance de la informática, se puede realizar simulaciones de las carreras y de los vehículos para saber cuál es la mejor estrategia a seguir para llevar al equipo y al piloto a la victoria. Además, no son solo los profesionales los que recurren a este tipo de aplicaciones para realizar sus estrategias, sino que hay entusiastas de este deporte que compran este tipo de \textit{software} para obtener la satisfacción personal de haber llevado un equipo virtual a la victoria y en el trayecto haber aprendido estrategias cada vez más complejas.


%Gracias al avance de la informática, se puede obtener más información de diversos factores en tiempo real, tales como: estado general del vehículo, condiciones del piloto e incluso estado de la pista. Con todos estos datos, se puede tomar la mejor decisión para llevar el piloto y el equipo a la victoria. Además, son cada vez más los entusiastas que recurren al uso de simuladores para poder probar de primera mano estas experiencias.

\bigskip

No obstante, el número de simuladores de gestión de carreras es relativamente pequeño y poco variado, normalmente centrándose en ciertas disciplinas concretas y en un solo equipo de carreras, sin poder interaccionar con los demás en ningún momento. % Además, algo que todos estos simuladores no tienen, es la posibilidad de modificar dichos parámetros en tiempo real a todos los pilotos para ver como afecta a su rendimiento.

\bigskip

Los dos ejemplos más notables de este tipo de aplicación son:

\begin{itemize}
   \item \textit{Gran Turismo B-Spec: }Parte de la saga para consolas \textit{PlayStation} que se centra en dar órdenes a un piloto en la carrera. Dependiendo de estas decisiones y de otros factores tales como la posición en la que se encuentre, puede variar su aguante físico, mental y su agresividad, pudiendo así cometer errores. Permite correr en una gran variedad de vehículos.
   %\item Un ejemplo de aplicaciones existentes es la de \textit{Gran Turismo B-Spec}, que permite dar órdenes a un piloto durante la carrera y dependiendo de la frecuencia de dichas órdenes y la posición en la parrilla, pueden variar sus parámetros de aguante físico y mental.
   \item \textit{F1 Manager 22: }Simulador de gestión de carreras centrado exclusivamente en la \textit{Formula 1}, similar al anterior simulador. La desventaja que tiene es que se centra nada más que en una disciplina particular, pero consigue un nivel alto de profundidad en los sistemas.
%   \item Otro ejemplo de este tipo de simuladores es el de \textit{F1 Manager 22}, que permite dar órdenes a los pilotos de un equipo de Formula 1. La desventaja es que solo se centra en una disciplina concreta, pero consigue un nivel alto de realismo.
\end{itemize}

En este proyecto se pretende desarrollar un simulador multidisciplinar, relativamente realista y personalizable mediante el uso de parámetros, incluyendo algunos similares a los mencionados anteriormente, y que además ofrece la posibilidad de modificar dichos parámetros de todos los pilotos en tiempo real, aparte de ser modificados por las condiciones de la carrera en la que se encuentre cada piloto.

\bigskip

Además, la aplicación permitirá ajustar las aptitudes, el número de pilotos, la velocidad máxima de los coches, el número de los mismos y el número de vueltas y la hora del día a la que se va a disputar la carrera. Cabe decir que el \textit{software} permitirá también modificar otros aspectos ajenos a los que puedan modificar el resultado de la carrera, tales como la velocidad de simulación.

\bigskip

Todo lo mencionado permitirá a los entusiastas experimentar una simulación algo realista y sobre todo con el factor de la personalización superior a los ejemplos mencionados, al permitir simular condiciones muy específicas, y hacer que los usuarios comprendan como afectan dichas variables a los pilotos y su equipo, incluso en la vida real.

\section{Objetivos}

Como se ha mencionado en el apartado anterior, el objetivo principal de este proyecto es de ofrecer un simulador de carreras multidisciplinar y con un grado alto de personalización en las variables de cada piloto.

\bigskip

Además, el proyecto debe cumplir los siguientes objetivos mínimos relativos a cambios antes de ejecutar la simulación:

\begin{itemize}
   \item Cambio de número de pilotos.
   \item Cambio de número de vueltas.
   \item Cambios de las aptitudes de los pilotos; es decir, el nivel máximo de cada condición que puede alcanzar.
   \item Cambio de la velocidad máxima de los vehículos.
   \item Permitir (opcionalmente) que haya variación de prestaciones entre vehículos.
\end{itemize}

\bigskip

En cuanto a cambios durante la simulación, debe cumplir estos objetivos:

\begin{itemize}
   \item Seleccionar piloto de la lista de pilotos.
   \item Obtener las condiciones actuales del piloto seleccionado.
   \item Modificar las condiciones actuales del piloto seleccionado.
\end{itemize}

Cabe destacar que todos estos objetivos y algunos opcionales serán explicados en detalle en apartados siguientes.

\section{Estado del arte}

Como ya se ha descrito anteriormente, este proyecto hará uso de \textit{Unreal Engine} como motor gráfico y como \textit{framework} para la realización del simulador especificado. En cuanto a la forma en la que los pilotos se moverán por el circuito, he decidido usar el algoritmo de navegación \textbf{PONER AQUI EL ALGORITMO DE NAVEGAICION}.

\bigskip

A continuación, voy a explicar las distintas opciones que hay disponibles en motores gráficos y en algoritmos de navegación y explicar el motivo de la elección realizada. Separaré esto en dos subsecciones.

\subsection{Motor gráfico}
En el mercado hay gran variedad de motores gráficos de videojuegos, los más conocidos son los siguientes:

\bigskip
% \begin{itemize}
\textbf{Unreal Engine} es una plataforma de desarrollo que permite, entre otras cosas: el desarrollo de videojuegos, creación de contenido para programas y películas, simulación, etc [https://www.unrealengine.com/es-ES/faq]. Posee un soporte para un gran número de plataformas, tanto consolas como móviles.

\bigskip

Unreal además ofrece \textit{Blueprint Visual Scripting}, el cual es un sistema de \textit{scripting} visual que hace uso de nodos para programar las distintas partes del sistema. Permite programar de manera visual sin la necesidad de conocer la \textit{API} de C++ %[https://docs.unrealengine.com/5.1/en-US/introduction-to-blueprints-visual-scripting-in-unreal-engine/] 


   % Además, a partir de la versión 5.0, \textit{Unreal} incluye tecnologías de optimización de rendimiento tales como TSR \textit{(Temporal Super Resolution)}, haciendo que el juego se renderice a una resolución menor y luego se reescale, \textit{Nanite}, que permite tener objetos con una gran cantidad de polígonos en la pantalla, y Lumen, que permite tener una iluminación más realista. %[https://www.unrealengine.com/en-US/unreal-engine-5] 

\bigskip

Además, a partir de la versión 5.0, Unreal incluye diversas tecnologias como: 

\begin{itemize}
   \item TSR \textit{(Temporal Super Resolution)}, mejorando el rendimiento haciendo que el juego se renderice internamente a una resolución menor y luego sea reescalado al tamaño deseado.
   \item Nanite, que permite tener objetos con una gran cantidad de polígonos en la pantalla, 
   \item Lumen, que genera una iluminación más realista. %[https://www.unrealengine.com/en-US/unreal-engine-5]
\end{itemize}

Todo esto permite tener un resultado a nivel gráfico muy convincente sin necesitar dedicar demasiado trabajo en este apartado y sin requerir un hardware demasiado potente.

\bigskip

Asimismo, Unreal incluye un bazar con una gran cantidad de recursos, permitiendo simplificar mucho el desarrollo de videojuegos.

\bigskip

Sin embargo, no tiene una licencia de código abierto, pero su código fuente es accesible a través de un repositorio de GitHub %[https://forums.unrealengine.com/t/is-unreal-open-source/473823]

\bigskip

\textbf{Unity} es una plataforma de desarrollo que permite: desarrollar videojuegos, visualizar construcciones en el ámbito de la arquitectura, para uso en la industria automotriz y para la creación de películas y series.

\bigskip

Entre sus características se encuentra:

\begin{itemize}
   \item Uso de C\# como lenguaje de programación.
   \item Motor de físicas 2D separado del de físicas en 3D.
   \item Posee un \textit{Scriptable Rendering Pipeline} altamente personalizable, permitiendo mediante el uso de scripts escritos en C\# personalizar sombras, iluminación, oclusión ambiental, entre otras.
   \item Soporte para un gran número de plataformas, incluyendo consolas y móviles, aparte de Windows, macOS y Linux.
   \item Incluye un lenguaje de programación visual, similar a \textit{Unreal} que permite programar sin necesitar conocer la \textit{API}.
\end{itemize}
% https://unity.com/es 
   
\bigskip

Además, Unity tiene varias versiones del programa, incluyendo uno gratuito y los demás de pago, con prioridad en la asistencia y un mayor abanico de herramientas.

\bigskip

\textbf{Godot} es un motor gráfico gratuito y multiplataforma de código abierto que permite crear videojuegos en 2D y 3D. 
   
Entre las características más notables se encuentran las siguientes:

\begin{itemize}
   % \item Utilización de lenguaje visual, similar al usado en \textit{Unreal Engine}.
   \item Motor gráfico 2D dedicado, 
   % \item programación en diversos lenguajes de programación, con la opción de incluir nuevos lenguajes mediante plugins. 
   \item Programación usando GDScript, C\# o C++ de manera oficial. No obstante, se puede programar usando otro lenguaje como Rust, Python o JavaScript. 
   \item Soporte para un gran número de plataformas, incluyendo móviles y consolas.
   \item Incluye un motor de físicas (solo para el motor gráfico 3D), aunque es algo más simple que el de sus competidores.
\end{itemize}

\bigskip 

A partir de la versión 4, Godot ha dejado de incluir el lenguaje visual, debido a su falta de uso, por lo que solo es posible utilizar lenguajes de programación convencionales. %[https://godotengine.org/article/godot-4-will-discontinue-visual-scripting/]

\bigskip

Además, Godot tiene una biblioteca con una gran cantidad de recursos para utilizar durante el desarrollo de un videojuego.
   % [https://godotengine.org/asset-library/asset]
   % [https://docs.godotengine.org/en/stable/tutorials/scripting/visual_script/getting_started.html]
% CryEngine: 

\bigskip

Al final he decidido usar Unreal Engine debido a que la versión gratuita incluye toda la funcionalidad, ofrece unos buenos resultados a nivel visual sin requerir demasiado esfuerzo, es el más potente en cuanto a programación visual y es con el que más familiarizado estoy de todas las opciones citadas anteriormente.

\subsection{Algoritmo de navegación}
En cuanto a algoritmos de navegación para los vehículos, los más destacados son:

\begin{itemize}
   \item Aprendizaje por refuerzo (Q-Learning): Es una técnica de aprendizaje automático en la que el agente aprende a tomar decisiones en un entorno mediante la interacción a través de acciones (en este caso es: acelerador, freno y volante) y recibiendo una recompensa en caso de acercarse al objetivo deseado o de hacerlo bien.
   
   Es importante obtener un equilibrio entre exploración y explitación, para que el agente sea capaz de actuar ante situaciones desconocidas de manera correcta. En caso de estar desequilibrado, puede darse la situación en el que se produzca un máximo local y no sea capaz de descubrir la mejor estrategia.

   Para evitar esto, se suelen utilizar métodos de equilibrio. Uno de ellos es el denominado \textit{epsilon-greedy}, que permite controlar la cantidad de exploración mediante un parámetro \textit{epsilon}, que determina la aleatoriedad en la selección de acciones %[https://www.tokic.com/www/tokicm/publikationen/papers/KI2011.pdf]
   permitiendo elegir en función de dicho parámetro una acción aleatoria o la mejor hasta el momento.

   Una desventaja que tiene es la necesidad de entrenar el modelo, cosa que puede llevar demasiado tiempo, pero con el suficiente tiempo y con un conjunto de recompensas y castigos bien realizado, es uno de los mejores algoritmos para resolver este tipo de problema.

   \item 
\end{itemize}
%\input{capitulos/01_Introduccion}
%
%\input{capitulos/02_EspecificacionRequisitos}
%
%\input{capitulos/03_Planificacion}
%
%\input{capitulos/04_Analisis}
%
%\input{capitulos/05_Diseno}
%
%\input{capitulos/06_Implementacion}
%
%\input{capitulos/07_Pruebas}
%
%\input{capitulos/08_Conclusiones}
%
%%\chapter{Conclusiones y Trabajos Futuros}
%
%
%%\nocite{*}
%\bibliography{bibliografia/bibliografia}\addcontentsline{toc}{chapter}{Bibliografía}
%\bibliographystyle{miunsrturl}
%
%\appendix
%\input{apendices/manual_usuario/manual_usuario}
%%\input{apendices/paper/paper}
%\input{glosario/entradas_glosario}
% \addcontentsline{toc}{chapter}{Glosario}
% \printglossary
\chapter*{}
\thispagestyle{empty}

\end{document}
