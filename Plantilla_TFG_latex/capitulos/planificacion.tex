% DUDAS
% PUSE EXPLICACION GENERAL, PERO NO SE EXACTAMENTE QUE ES
% esto son datos cambiantes, puedo poner algo inicial, pero seguramente haya que modificarlo al final
% no se ni siquiera el numero de sprints que va a haber!! (tendria que tener una velocidad de equipo)
% En el siguiente capitulo es cuando se hace la division en tareas, no entiendo si hayq ue poner otro diagrama de gantt especifico en el capitulo anterior
\chapter{Planificación}

\section{Introducción}

Se pretende adaptar una metodología ágil para el desarrollo del proyecto, más concretamente el marco de trabajo Scrum para que se ajuste a las condiciones del proyecto, y se complementará con otras herramientas de planificación.

\bigskip

Al ser solo una persona desarrollando el proyecto, es imposible seguir algunas fases del marco de trabajo, como los \textit{Daily Meetings}. No obstante, todos los artefactos se pueden generar.
%  y el proyecto puede ser dividido en Sprints.

\bigskip

Otros aspectos de Scrum que se van a aplicar son: la utilización de sprints para desarrollar el proyecto, su enfoque iterativo e incremental y las Historias de Usuario.

\bigskip

Además, se van a utilizar herramientas que no son estrictamente de metodologías ágiles, como el diagrama de Gantt, para mostrar de una manera más visual la temporización de las distintas tareas a realizar.
% para planificar la cantidad de tiempo que se piensa dedicar a cada sprint o Historia de Usuario, dependiendo del nivel de detalle. 

\bigskip

Por último, cabe recalcar que no se pretende seguir Scrum o una metodología ágil de manera precisa, al no cumplir todos los requisitos para poder usarlo. Solo se usarán algunos aspectos aplicables del marco, junto a otras herramientas que no son exactamente de metodologías ágiles.


\newpage

\section{Product Backlog}

El \textit{Product Backlog} con las Historias de Usuario, ordenadas por prioridad y con sus Puntos de Historia (PH), son:

\begin{table}[H]
    \centering
    \begin{tabularx}{\textwidth}{| >{\centering\arraybackslash}X | >{\centering\arraybackslash}m{5.5cm} | >{\centering\arraybackslash}X | >{\centering\arraybackslash}X |}
        \hline
        \textbf{Código} & \textbf{Descripción} & \textbf{Prioridad} & \textbf{PH} \\
        \hline
        % HU1 & Como usuario, quiero que el sistema simule la conducción de varios pilotos en una carrera de coches, incluyendo adelantamientos y sorteo de obstáculos. & 1 & 5 \\
        HU1 & Como usuario, quiero tener una representación en 3D de los coches y el circuito. & 1 & 3 \\
        \hline
        HU2 & Como usuario, quiero que los pilotos calculen la ruta más óptima en el circuito. & 1 & 8 \\
        \hline
        HU3 & Como usuario, quiero que los pilotos sean capaces de seguir una ruta de manera suave. & 1 & 5 \\
        \hline
        HU4 & Como usuario, quiero que los pilotos sean capaces de adelantarse entre ellos. & 1 & 5 \\
        \hline
        HU5 & Como usuario, quiero que los pilotos sean capaces de recuperarse después de un accidente. & 1 & 3 \\
        \hline
        HU6 & Como usuario, quiero modificar los ajustes de la simulación antes de comenzar la carrera. & 2 & 2 \\
        \hline
        HU7 & Como usuario, quiero modificar el estado de los pilotos durante la carrera. & 2 & 2 \\
        \hline
        HU8 & Como usuario, quiero ver la posición actual y el estado de los pilotos de la carrera en curso. & 3 & 3 \\
        \hline
        HU9 & Como usuario, quiero ver el número de vueltas de la carrera en curso. & 3 & 2 \\ 
        \hline
        HU10 & Como usuario, quiero guardar la configuración de una carrera para su posterior uso. & 4 & 2\\
        \hline
        HU11 & Como usuario, quiero cargar la configuración de una carrera almacenada en un archivo. & 4 & 2 \\
        \hline
        HU12 & Como usuario, quiero pausar y reanudar la simulación en curso. & 5 & 0,5 \\
        \hline
        HU13 & Como usuario, quiero modificar la velocidad de la simulación. & 5 & 0,5 \\
        \hline
    \end{tabularx}
\end{table}


\newpage

\section{Velocidad del equipo}

Esto solo es una estimación de la velocidad que se puede alcanzar para el primer Sprint, en función de los puntos de historia realizados al final del mismo se actualizará la velocidad del equipo.

\bigskip

Algunos aspectos a tener en cuenta son:

\begin{itemize}
    \item Duración de los sprints de \sprintLength, que equivalen a \actualSprintLength, quitando fines de semana.
    \item Se trabajará 6 horas al día en el proyecto.
    \item 1 PH representa un día de trabajo ideal a jornada completa (8 horas). Por tanto, usando las horas reales, 1 PH se completaría en 1,33 días.
    \item Hay un total de \projectph en el proyecto.
\end{itemize}

\bigskip

Entonces, la estimación de la velocidad del equipo para la primera iteración es: $\frac{10 \text{ días/sprint}}{1.33 \text{ días/PH}} = 7.5 \text{ PH/sprint} \simeq \mathbf{8\,PH/sprint}$
% $2 \text{ semanas/sprint} \times 20 \text{ horas/semana} \times 8 \text{ horas/PH} = $

\section{\textcolor{red}{Diseño del Sprint}}

% INCLUIR LOS SPRINTS REFERENTES A LA DOCUMENTACION
% Este proyecto se dividirá en \sprintNro sprints, cuya duración será de \sprintLength. A continuación se desglosará qué se realizará en cada uno de ellos.

La implementación de la aplicación final se dividirá en \sprintNro sprints, cuya duración será de \sprintLength. A esta cifra hay que sumarle los \docSprints sprints anteriores en los que se ha realizado la documentación y prototipos para encontrar el algoritmo que más se ajuste a las necesidades del proyecto. Entonces, hay un total de \totalSprints sprints.

\subsection{Sprint 1}
\begin{itemize}
    \item Explicación: En este sprint se ha creado la versión inicial de la introducción de la documentación, incluyendo las distintas opciones en motores gráficos y algoritmos de navegación.

    \item Temporización: Del 20 de febrero hasta el 8 de marzo.
\end{itemize}

\subsection{Sprint 2}
\begin{itemize}
    \item Explicación: En este sprint se han corregido todos los errores producidos en el capítulo de introducción de la documentación. Además, se incluyeron nuevos algoritmos de navegación y se detallaron algunos otros en la sección de estado del arte.
    \item Temporización: Del 8 de marzo hasta el 22 de marzo. 
\end{itemize}

\subsection{Sprint 3}
\begin{itemize}
    \item Explicación: En este sprint se han arreglado más fallos en el capítulo de introducción y se ha creado la especificación de requisitos del proyecto.
    
    Además, se ha realizado un prototipo del proyecto para probar distintos algoritmos de navegación y se ha programado una versión inicial del algoritmo de seguimiento de líneas de los coches.
    \item Temporización: Del 22 de marzo hasta el 29 de marzo.
\end{itemize}


\subsection{Sprint 4 - Comienzo de la aplicación final}
\begin{itemize}
    \item Explicación: En este sprint se han añadido más detalles a la especificación de requisitos, incluyendo algunos requisitos que faltaban, y se han redactado los capítulos de planificación y análisis.
    
    % Asimismo, se ha comenzado la implementación del proyecto, implementando el algoritmo de navegación inicial y la versión final del controlador del volante utilizando un algoritmo genético para su refinamiento.
    Asimismo, se ha comenzado con la aplicación final, creando la trazada del circuito y el modelado de los coches, con el objetivo de tener una base para los siguientes sprints. También se ha implementado el controlador para que los coches puedan girar de manera suave y correcta por el circuito. Para ello, se ha empleado un algoritmo genético con el objetivo de obtener los mejores valores para el controlador.

    \item Temporización: Del 29 de marzo hasta el 18 de abril.
    \item Historias de Usuario abordadas: HU1, HU3.
\end{itemize}

\subsection{Sprint 5}
\begin{itemize}
    \item Explicación: En este sprint se pretende implementar el algoritmo de navegación base para que los pilotos puedan saber la ruta más eficiente por el circuito.

    % En este sprint se pretende refinar el algoritmo de navegación para que sean capaces de realizar adelantamientos. Además, se implementará la lógica necesaria para que los pilotos que se han salido de pista, puedan recuperarse y volver, calculando una nueva ruta.

    En cuanto a la documentación, se arreglarán los fallos encontrados del sprint anterior y se redactarán los capítulos de diseño e implementación.

    \item Temporización: Del 24 de abril hasta el 7 de mayo.
    \item Historias de Usuario abordadas: HU2.
\end{itemize}

\newpage

\subsection{Sprint 6}

\begin{itemize}
    \item Explicación: En este sprint se pretende incluir la lógica adicional referente a los adelantamientos y recuperaciones en accidentes, para que los pilotos realicen acciones más acordes a la realidad.
    
    % En este sprint se pretende implementar la pantalla de configuración de la simulación, junto a la visualización de la lista de posiciones de los pilotos y el contador de vueltas. Asimismo, se implementará la modificación manual de estado de los pilotos durante la carrera.

    \item Temporización: Del 8 de mayo hasta el 21 de mayo.
    \item Historias de Usuario abordadas: HU4, HU5.
\end{itemize}

\subsection{Sprint 7}

\begin{itemize}
    \item Explicación: En este sprint se pretende implementar el configurador de la simulación, junto al listado de posiciones de los pilotos. Además, se implementará la lógica para poder modificar el estado de los pilotos en tiempo real.
    
    % En este último sprint se pretende implementar las opciones de importación y exportación de la configuración a un fichero externo, con el objetivo de tener una forma rápida y sencilla de almacenar la configuración.
    
    % Además, se implementará el botón de pausa y el botón de velocidad de la simulación.
    
    \item Temporización: Del 22 de mayo hasta el 4 de junio.
    \item Historias de Usuario abordadas: HU6, HU7, HU8.
\end{itemize}

\subsection{Sprint 8}

\begin{itemize}
    \item Explicación: En este último sprint se pretende implementar el contador de vueltas de la carrera, la lógica para la exportación e importación de ficheros de configuración al simulador, el botón de pausa y el botón de velocidad de simulación.
    \item Temporización: Del 4 de junio hasta el 18 de junio.
    \item Historias de Usuario abordadas: HU9, HU10, HU11, HU12, HU13.
\end{itemize}

% \subsection{Sprint 8}

% \begin{itemize}
%     \item Explicación: 
%     \item Temporización: Del 4 de junio hasta el 18 de junio.
%     \item Historias de Usuario abordadas: 
% \end{itemize}

\newpage
\section{Diagrama de Gantt}

El diagrama de Gantt general de todos los Sprints es:


% diagrama de Gantt general
% \begin{center}
\begin{adjustbox}{angle=90}
    \resizebox{0.9\textheight}{!}{
        \begin{ganttchart}[
                hgrid,
                vgrid,
                x unit=5mm,
                time slot format=isodate,
            ]{2023-04-24}{2023-06-04}
            % \gantttitle{Diagrama de Gantt general}{1}
            \gantttitlecalendar{month=name, day, week, weekday=letter} \\
            \ganttbar{Sprint 1}{2023-04-24}{2023-05-07} \\
            \ganttbar{Sprint 1}{2023-04-24}{2023-05-07} \\
            \ganttbar{Sprint 1}{2023-04-24}{2023-05-07} \\
            \ganttbar{Sprint 1}{2023-04-24}{2023-05-07} \\
            \ganttbar{Sprint 1}{2023-04-24}{2023-05-07} \\
            \ganttbar{Sprint 1}{2023-04-24}{2023-05-07} \\
            \ganttbar{Sprint 1}{2023-04-24}{2023-05-07} \\
            \ganttbar{Sprint 1}{2023-04-24}{2023-05-07} \\
            \ganttbar{Sprint 1}{2023-04-24}{2023-05-07} \\
            \ganttbar{Sprint 1}{2023-04-24}{2023-05-07} \\
            \ganttbar{Sprint 1}{2023-04-24}{2023-05-07} \\
            \ganttbar{Sprint 1}{2023-04-24}{2023-05-07} \\
            \ganttbar{Sprint 2}{2023-05-08}{2023-05-21} \\
            \ganttbar{Sprint 3}{2023-05-22}{2023-06-04}
        \end{ganttchart}
    }
\end{adjustbox}
% \end{center}

\newpage

Los diagramas de Gantt de cada Sprint los voy a dividir en distintas subsecciones a continuación:

\subsection{Sprint 1}

\begin{center}
    \resizebox{0.6\textwidth}{!}{
        \begin{ganttchart}[
                hgrid,
                vgrid,
                x unit=6mm,
                time slot format=isodate,
            ]{2023-04-24}{2023-05-07}
            % \gantttitle{Diagrama de Gantt general}{1}
            \gantttitlecalendar{month=name, day, week, weekday=letter} \\
            \ganttbar{HU1}{2023-04-24}{2023-04-28}
            \ganttbar{}{2023-05-01}{2023-05-03} \\
            \ganttbar{HU2}{2023-05-04}{2023-05-05}
        \end{ganttchart}
    }
\end{center}

\subsection{Sprint 2}

\begin{center}
    \resizebox{0.6\textwidth}{!}{
        \begin{ganttchart}[
                hgrid,
                vgrid,
                x unit=6mm,
                time slot format=isodate,
            ]{2023-05-08}{2023-05-21}
            % \gantttitle{Diagrama de Gantt general}{1}
            \gantttitlecalendar{month=name, day, week, weekday=letter} \\
            \ganttbar{HU3}{2023-05-08}{2023-05-11} \\
            \ganttbar{HU4}{2023-05-12}{2023-05-12}
            \ganttbar{}{2023-05-15}{2023-05-17} \\
            \ganttbar{HU5}{2023-05-18}{2023-05-19}
        \end{ganttchart}
    }
\end{center}

\subsection{Sprint 3}

\begin{center}
    \resizebox{0.6\textwidth}{!}{
        \begin{ganttchart}[
                hgrid,
                vgrid,
                x unit=6mm,
                time slot format=isodate,
            ]{2023-05-22}{2023-06-04}
            % \gantttitle{Diagrama de Gantt general}{1}
            \gantttitlecalendar{month=name, day, week, weekday=letter} \\
            \ganttbar{HU6}{2023-05-22}{2023-05-25} \\
            \ganttbar{HU7}{2023-05-29}{2023-06-01} \\
            \ganttbar{HU8}{2023-05-26}{2023-05-26} \\
            \ganttbar{HU9}{2023-06-02}{2023-06-02}
        \end{ganttchart}
    }
\end{center}

% diagrama de gantt