\chapter{Planificación}

\section{Introducción}

Se pretende adaptar una metodología ágil para el desarrollo del proyecto, más concretamente el marco de trabajo Scrum para que se ajuste a las condiciones del proyecto, y se complementará con otras herramientas de planificación.

\bigskip

Al ser solo una persona desarrollando el proyecto, es imposible seguir algunas fases del marco de trabajo, como los \textit{Daily Meetings}. No obstante, todos los artefactos se pueden generar.

\bigskip

Otros aspectos de Scrum que se van a aplicar son: la utilización de sprints para desarrollar el proyecto, su enfoque iterativo e incremental y las Historias de Usuario.

\bigskip

Además, se van a utilizar herramientas que no son estrictamente de metodologías ágiles, como el diagrama de Gantt, para mostrar de una manera más visual la temporización de las distintas tareas a realizar.

\bigskip

Por último, cabe recalcar que no se pretende seguir Scrum o una metodología ágil de manera precisa, al no cumplir todos los requisitos para poder usarlo. Solo se usarán algunos aspectos aplicables del marco, junto a otras herramientas que no son exactamente de metodologías ágiles.


\newpage

\section{Product Backlog}

El \textit{Product Backlog} con las Historias de Usuario, ordenadas por prioridad y con sus Puntos de Historia (PH), son:

\small
\begin{longtblr}[
    label = none,
    entry = none,
  ]{
    width = \textwidth,
    colspec = {Q[120]Q[496]Q[140]Q[70]},
    row{1} = {Silver},
    column{1-4} = {c,m},
    % column{2} = {c,m},
    hlines,
    vlines,
  }
   \textbf{Código} & \textbf{Descripción} & \textbf{Prioridad} & \textbf{PH} \\

        HU1 & Como usuario, quiero tener una representación en 3D de los coches y el circuito. & 1 & 3 \\
        
        HU2 & Como usuario, quiero que los pilotos calculen la ruta más óptima en el circuito. & 1 & 8 \\
        
        HU3 & Como usuario, quiero que los pilotos sean capaces de seguir una ruta de manera suave. & 1 & 5 \\
        
        HU4 & Como usuario, quiero que los pilotos sean capaces de adelantarse entre ellos. & 1 & 5 \\
        
        HU5 & Como usuario, quiero que los pilotos sean capaces de recuperarse después de un accidente. & 1 & 3 \\
        
        HU6 & Como usuario, quiero modificar los ajustes de la simulación antes de comenzar la carrera. & 2 & 2 \\
        
        HU7 & Como usuario, quiero modificar el estado de los pilotos durante la carrera. & 2 & 2 \\
        
        HU8 & Como usuario, quiero ver la posición actual y el estado de los pilotos de la carrera en curso. & 3 & 3 \\
        
        HU9 & Como usuario, quiero ver el número de vueltas de la carrera en curso. & 3 & 2 \\ 
        
        HU10 & Como usuario, quiero guardar la configuración de una carrera para su posterior uso. & 4 & 2\\
        
        HU11 & Como usuario, quiero cargar la configuración de una carrera almacenada en un archivo. & 4 & 2 \\
        
        HU12 & Como usuario, quiero pausar y reanudar la simulación en curso. & 4 & 0,5 \\
        
        HU13 & Como usuario, quiero modificar la velocidad de la simulación. & 4 & 0,5 \\
        
        HU14 & Como usuario, quiero salir de la simulación que hay en curso. & 4 & 0.5 \\
        
        HU15 & Como usuario, quiero que los vehículos puedan utilizar el rebufo del vehículo de delante. & 4 & 2 \\

        HU16 & Como usuario, quiero cambiar entre distintas cámaras disponibles. & 4 & 3 \\

        HU17 & Como usuario, quiero visualizar la ruta generada por los vehículos, de manera opcional. & 4 & 2 \\

        HU18 & Como usuario, quiero visualizar los puntos de control del circuito, de manera opcional. & 4 & 1 \\
  \end{longtblr}
\normalsize

\newpage

\section{Velocidad del equipo}

Esto solo es una estimación de la velocidad que se puede alcanzar a partir del sprint en el que se comience a implementar la aplicación. En función de los puntos de historia realizados al final del mismo se actualizará la velocidad del equipo.

\bigskip

Algunos aspectos a tener en cuenta son:

\begin{itemize}
    \item Duración de los sprints de \sprintLength, que equivalen a \actualSprintLength, quitando fines de semana.
    \item Se trabajará 6 horas al día en el proyecto.
    \item 1 PH representa un día de trabajo ideal a jornada completa (8 horas). Por tanto, usando las horas reales, 1 PH se completaría en 1,33 días.
    \item Hay un total de \projectph en el proyecto.
\end{itemize}

\bigskip

Entonces, la estimación de la velocidad del equipo para la primera iteración es: $\frac{10 \text{ días/sprint}}{1.33 \text{ días/PH}} = 7.5 \text{ PH/sprint} \simeq \mathbf{8\,PH/sprint}$
% $2 \text{ semanas/sprint} \times 20 \text{ horas/semana} \times 8 \text{ horas/PH} = $

\section{Diseño del Sprint}

% INCLUIR LOS SPRINTS REFERENTES A LA DOCUMENTACION
% Este proyecto se dividirá en \sprintNro sprints, cuya duración será de \sprintLength. A continuación se desglosará qué se realizará en cada uno de ellos.

La implementación de la aplicación final se dividirá en \sprintNro sprints. A esta cifra hay que sumarle los \docSprints sprints anteriores en los que se ha realizado la documentación y prototipos para encontrar el algoritmo que más se ajuste a las necesidades del proyecto. Entonces, hay un total de \totalSprints sprints, cuya duración será de \sprintLength por sprint.

\subsection{Sprint 1}
\begin{itemize}
    \item Explicación: En este sprint se creará la versión inicial de la introducción de la documentación, incluyendo las distintas opciones en motores gráficos y algoritmos de navegación.

    \item Temporización: Del 20 de febrero hasta el 5 de marzo.
\end{itemize}

\subsection{Sprint 2}
\begin{itemize}
    \item Explicación: En este sprint se corregirán todos los errores producidos en el capítulo de introducción de la documentación. Además, se incluirán nuevos algoritmos de navegación y se detallarán algunos otros en la sección de estado del arte.
    \item Temporización: Del 6 de marzo hasta el 19 de marzo. 
\end{itemize}

\subsection{Sprint 3}
\begin{itemize}
    \item Explicación: En este sprint se corregirán errores de la introducción y se creará la especificación de requisitos del proyecto.
    
    Además, se pretende implementar un prototipo del proyecto para probar distintos algoritmos de navegación y se programará una versión inicial del algoritmo de seguimiento de líneas de los coches.
    \item Temporización: Del 20 de marzo hasta el 2 de abril.
\end{itemize}


\subsection{Sprint 4 - Comienzo del desarrollo de la aplicación}
\begin{itemize}
    \item Explicación: En este sprint se pretende añadir más detalles a la especificación de requisitos, incluyendo algunos requisitos que faltaban, y se comenzarán a redactar los capítulos de planificación y análisis.
    
    Asimismo, se comenzará con la implementación de la aplicación final, creando la trazada del circuito y el modelado de los coches, con el objetivo de tener una base para los siguientes sprints. También se pretende implementar el controlador para que los coches puedan girar de manera suave y correcta por el circuito. Para ello, se hará uso de un algoritmo genético para ajustar el giro.
    % Para ello, se ha empleado un algoritmo genético con el objetivo de obtener los mejores valores para el controlador.

    \item Temporización: Del 3 de abril hasta el 16 de abril.
    \item Historias de Usuario abordadas: HU1, HU3.
\end{itemize}

\subsection{Sprint 5}
\begin{itemize}
    \item Explicación: En este sprint se pretende implementar el algoritmo de navegación base para que los pilotos puedan saber la ruta más eficiente por el circuito.


    En cuanto a la documentación, se arreglarán los fallos encontrados del sprint anterior y se redactarán los capítulos de diseño e implementación.

    \item Temporización: Del 17 de abril hasta el 30 de abril.
    \item Historias de Usuario abordadas: HU2.
\end{itemize}

\newpage

\subsection{Sprint 6}

\begin{itemize}
    \item Explicación: En este sprint, se pretende corregir los fallos de los sprints anteriores y se detallarán las entidades de la aplicación, junto a las reglas utilizadas en el algoritmo de navegación.
    
    En cuanto a la aplicación, se incluirá la lógica adicional referente a los adelantamientos y recuperaciones en accidentes, para que los pilotos realicen acciones más acordes a la realidad.
    

    \item Temporización: Del 1 de mayo hasta el 14 de mayo.
    \item Historias de Usuario abordadas: HU4, HU5.
\end{itemize}

\subsection{Sprint 7}

\begin{itemize}
    \item Explicación: En este sprint, se seguirá corrigiendo la documentación, incluyendo los nuevos cambios incluidos en la aplicación.
    
    En la aplicación se implementará el configurador de la simulación, junto al listado de posiciones de los pilotos. Además, se implementará la lógica para poder modificar el estado de los pilotos en tiempo real.
    
    \item Temporización: Del 15 de mayo hasta el 28 de mayo.
    \item Historias de Usuario abordadas: HU6, HU7, HU8.
\end{itemize}

\subsection{Sprint 8}

\begin{itemize}
    \item Explicación: Se añadirá la nueva funcionalidad a la documentación, así como se arreglarán los diversos fallos que tenga.
    
    Además, se pretende implementar el contador de vueltas de la carrera, la lógica para la exportación e importación de ficheros de configuración al simulador, el botón de pausa, el de salir de la simulación y el botón para cambiar la velocidad de simulación.

    \item Temporización: Del 29 de mayo hasta el 11 de junio.
    \item Historias de Usuario abordadas: HU9, HU10, HU11, HU12, HU13, HU14.
\end{itemize}

\subsection{Sprint 9}

\begin{itemize}
    \item Explicación: Se pretende añadir la nueva funcionalidad desarrollada en este sprint y se corregirán los posibles fallos encontrados.
    
    En la aplicación se incluirá botones para la visualización de los checkpoints y las rutas generadas, así como el rebufo entre vehículos y el cambio entre distintas cámaras.

    \item Temporización: Del 12 de junio hasta el 25 de junio.
    \item Historias de Usuario abordadas: HU15, HU16, HU17, HU18.
\end{itemize}

% \begin{itemize}
%     \item Explicación: 
%     \item Temporización: Del 4 de junio hasta el 18 de junio.
%     \item Historias de Usuario abordadas: 
% \end{itemize}

\newpage
\section{Diagrama de Gantt}

El diagrama de Gantt general de todos los Sprints es:


% diagrama de Gantt general
% \begin{center}
\begin{adjustbox}{angle=90}
    \resizebox{0.93\textheight}{!}{
        \begin{ganttchart}[
                hgrid,
                vgrid,
                x unit=5mm,
                time slot format=isodate,
                bar/.append style={fill=orange!25},
                group/.append style={fill=teal, draw=black},
                title/.style={fill=teal!15, draw=black},
            ]{2023-02-20}{2023-04-16}
            % \gantttitle{Diagrama de Gantt general}{1}
            \gantttitlecalendar{month=name, day, week, weekday=letter} \\
            \ganttbar{Documentación}{2023-02-20}{2023-04-16}

            \ganttnewline[thick, black]

            \ganttbar{Sprint 1}{2023-02-20}{2023-03-05} \\
            \ganttbar{Sprint 2}{2023-03-06}{2023-03-19} \\
            \ganttbar{Sprint 3}{2023-03-20}{2023-04-02}

            \ganttnewline[thick, black]

            \ganttgroup{Sprint 4}{2023-04-03}{2023-04-16} \\
            \ganttbar{HU1}{2023-04-03}{2023-04-06} \\ % 4 dias
            \ganttbar{HU3}{2023-04-07}{2023-04-07}
            \ganttbar{}{2023-04-10}{2023-04-14}
        \end{ganttchart}
    }
\end{adjustbox}
% \end{center}

\begin{adjustbox}{angle=90}
    \resizebox{0.87\textheight}{!}{
        \begin{ganttchart}[
                hgrid,
                vgrid,
                x unit=5mm,
                time slot format=isodate,
                bar/.append style={fill=orange!25},
                group/.append style={fill=teal, draw=black},
                title/.style={fill=teal!15, draw=black},
            ]{2023-04-17}{2023-06-25}
            % \gantttitle{Diagrama de Gantt general}{1}
            \gantttitlecalendar{month=name, day, week, weekday=letter} \\
            \ganttbar{Documentación}{2023-04-17}{2023-06-25}
            
            \ganttnewline[thick, black]

            \ganttgroup{Sprint 5}{2023-04-17}{2023-04-30} \\
            \ganttbar{HU2}{2023-04-17}{2023-04-21}
            \ganttbar{}{2023-04-24}{2023-04-28}

            \ganttnewline[thick, black]

            \ganttgroup{Sprint 6}{2023-05-01}{2023-05-14} \\
            \ganttbar{HU4}{2023-05-01}{2023-05-05}
            \ganttbar{}{2023-05-08}{2023-05-08} \\
            \ganttbar{HU5}{2023-05-09}{2023-05-12}

            \ganttnewline[thick, black]

            \ganttgroup{Sprint 7}{2023-05-15}{2023-05-28} \\
            \ganttbar{HU8}{2023-05-15}{2023-05-18} \\
            \ganttbar{HU7}{2023-05-19}{2023-05-19}
            \ganttbar{}{2023-05-22}{2023-05-23} \\
            \ganttbar{HU6}{2023-05-24}{2023-05-26}


            \ganttnewline[thick, black]

            \ganttgroup{Sprint 8}{2023-05-29}{2023-06-11} \\
            \ganttbar{HU9}{2023-05-29}{2023-05-31} \\
            \ganttbar{HU10}{2023-06-01}{2023-06-02}
            \ganttbar{}{2023-06-05}{2023-06-05} \\
            \ganttbar{HU11}{2023-06-06}{2023-06-08} \\
            \ganttbar{HU12}{2023-06-09}{2023-06-09} \\
            \ganttbar{HU13}{2023-06-09}{2023-06-09} \\
            \ganttbar{HU14}{2023-06-09}{2023-06-09}   
            
            \ganttnewline[thick, black]

            \ganttgroup{Sprint 9}{2023-06-12}{2023-06-25} \\
            \ganttbar{HU17}{2023-06-12}{2023-06-13} \\
            \ganttbar{HU18}{2023-06-14}{2023-06-14} \\
            \ganttbar{HU15}{2023-06-15}{2023-06-16}
            \ganttbar{}{2023-06-19}{2023-06-19} \\
            \ganttbar{HU16}{2023-06-20}{2023-06-23}
        \end{ganttchart}
    }
\end{adjustbox}